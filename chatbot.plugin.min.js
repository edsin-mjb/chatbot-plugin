window.Chatbot=function(d,e){const t=Object.assign({},{url:"ws://localhost:9080/ws",headerText:"Chat us",inputPlaceholder:"Type your message...",topic:"",welcomeMessage:"Hello! How can I assist you today?"},e),n=new WebSocket(t.url);let a="",c="",o,s,i;function l(e,t,n){n?(a="",c="",o=s=i=null):a.length?a&&(i.textContent+=e,a+=e,o.scrollTop=o.scrollHeight):(o=d.querySelector(".chat-window"),(s=document.createElement("div")).classList.add("message",t),(i=document.createElement("p")).textContent=e,s.appendChild(i),o.appendChild(s),a+=e,o.scrollTop=o.scrollHeight)}function r(){var e=d.querySelector(".input-container input");e&&e.value?.trim()?.length&&(l(e.value,"sent",0),l("","sent",1),n.send(JSON.stringify({search:e.value,title:t.topic})),e.value="")}function u(){var e=document.querySelector(".chatbot-window"),t=document.querySelector(".chat-rounded");e.classList.remove("hide"),e.classList.add("show"),t.classList.remove("show"),t.classList.add("hide")}function h(){var e=document.querySelector(".chatbot-window"),t=document.querySelector(".chat-rounded");e.classList.remove("show"),e.classList.add("hide"),t.classList.remove("hide"),t.classList.add("show")}n.addEventListener("open",function(e){console.log("WebSocket connection established.")}),n.addEventListener("message",function({data:e}){e=JSON.parse(e);l(e?.message?.content,"received",e.isEnd)}),n.addEventListener("close",function(e){console.log("WebSocket connection closed.")}),n.addEventListener("error",function(e){console.error("WebSocket error: "+e)});var e=document.createElement("link"),m=(e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",document.head.appendChild(e),(e=document.createElement("div")).classList.add("chatbot-window"),d.appendChild(e),document.createElement("div")),p=(m.classList.add("chat-header"),document.createElement("label")),v=(p.textContent=t.headerText,document.createElement("button"));m.appendChild(p),v.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>',v.addEventListener("click",h),m.appendChild(v),e.appendChild(m),(p=document.createElement("div")).classList.add("chat-window"),e.appendChild(p),(v=document.createElement("div")).classList.add("input-container"),e.appendChild(v),(m=document.createElement("input")).setAttribute("type","text"),m.setAttribute("placeholder",t.inputPlaceholder),v.appendChild(m),(p=document.createElement("button")).textContent="Send",p.addEventListener("click",r),v.appendChild(p),(e=document.createElement("button")).classList.add("chat-rounded"),e.classList.add("hide"),e.innerHTML='<i class="fa fa-commenting-o chat-icon" aria-hidden="true"></i>',e.addEventListener("click",u),d.appendChild(e),l(t.welcomeMessage,"received",0),l("","sent",1)};